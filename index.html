<script>
  // Initialisation de la carte (UNE SEULE FOIS)
  const map = L.map('map').setView([46.5, 2.5], 6);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap'
  }).addTo(map);

  // Groupe de clusters
  const markers = L.markerClusterGroup();

  // Chargement des donnÃ©es
  fetch('data.json')
    .then(res => res.json())
    .then(data => {
      data.forEach(person => {
        const marker = L.marker([
          Number(person.lat),
          Number(person.lng)
        ]).bindPopup(`<b>${person.name}</b><br>${person.city}`);

        markers.addLayer(marker);
      });

      map.addLayer(markers);
    });
</script>


